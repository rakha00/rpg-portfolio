---

---

<script>
  const initSoundLinks = () => {
    document.querySelectorAll('a[data-sound-link="true"]').forEach((link) => {
      if (link instanceof HTMLElement || link instanceof SVGAElement) {
        if (link.dataset.soundListenersAttached) return;

        const hoverSound = new Audio("/sounds/hover.mp3");
        const clickSound = new Audio("/sounds/click.mp3");
        hoverSound.volume = 0.3;
        clickSound.volume = 0.5;

        const playSound = (sound: HTMLAudioElement) => {
          if (localStorage.getItem("isMuted") === "true") return;
          sound.currentTime = 0;
          sound.play().catch((e: any) => {});
        };

        link.addEventListener("mouseenter", () => playSound(hoverSound));

        link.addEventListener("click", (event) => {
          event.preventDefault();

          // FIX: Get the destination URL correctly from either HTML or SVG links.
          const currentLink = event.currentTarget;
          let destination = "";
          if (currentLink instanceof HTMLAnchorElement) {
            destination = currentLink.href;
          } else if (currentLink instanceof SVGAElement) {
            destination = currentLink.href.baseVal;
          }

          playSound(clickSound);

          if (destination) {
            setTimeout(() => {
              window.location.href = destination;
            }, 200);
          }
        });

        link.dataset.soundListenersAttached = "true";
      }
    });
  };

  const handleHeaderVisibility = () => {
    const header = document.getElementById("main-header");
    if (!header) return;

    const isHomepage = window.location.pathname === "/";
    header.style.display = isHomepage ? "none" : "block";
  };

  const onPageLoad = () => {
    initSoundLinks();
    handleHeaderVisibility();
  };

  document.addEventListener("astro:page-load", onPageLoad);
  onPageLoad();
</script>
